<div class="container">
    <div class="grid">
        <div class="col-12">
            <div class="card">
                <div class="flex flex-column gap-4 mt-4">
                    <div class="my-4 px-4">
                        <form [formGroup]="ApprovalForm">
                            <div class="col-12 md:col-12">
                                <p-fieldset legend="PPO Approval" class="line-height-3 m-0">
                                    <div class="formgroup-inline">
                                        <div class="grid col-8">
                                            <label for="PpoId" class="col-12 md:col-2" >PPO ID:</label>
                                            <input class="col-12 md:col-4" id="PpoId" type="text" pInputText formControlName="ppoId" placeholder="PPO ID"/>
                                            <app-search-popup name="" [service$]="idList$"(return)="handlePpoSearchEvent($event)" [buttonStyle]="{width: '200%',height: '50px'}"></app-search-popup>          
                                        </div>
                                    </div>
                                </p-fieldset>
                            </div>
                        </form>
                        <div class="col-12" *ngIf="showTable">
                        <table class="table p-datatable p-component">
                          <thead>
                            <tr>
                              <th>PPO Id</th>
                              <th>PPO Number</th>
                              <th>Pensioner's Name</th>
                              <th>Payment Mode</th>
                              <th>Account Holder</th>
                              <th>Bank Branch Name</th>
                              <th>IFSC Code</th>
                              <th>Bank Account Number</th>
                              <th>Expiry Date</th>
                              <th>Commencement Date</th>
                            </tr>
                          </thead>
                          <tbody>
                            <tr *ngFor="let item of tableData">
                              <ng-container *ngIf="item.response.bankAccounts.length > 0; else noRecords">
                                <td>{{ item.response.ppoId }}</td>
                                <td>{{ item.response.ppoNo }}</td>
                                <td>{{ item.response.pensionerName }}</td>
                                <td>{{ item.response.bankAccounts[0].payMode }}</td>
                                <td>{{ item.response.bankAccounts[0].accountHolderName }}</td>
                                <td>{{ item.branchName }}</td>
                                <td>{{ item.response.bankAccounts[0].ifscCode }}</td>
                                <td>{{ item.response.bankAccounts[0].bankAcNo }}</td>
                                <td>{{ item.response.bankAccounts[0].expiryDate | date: 'dd-MM-yyyy' }}</td>
                                <td>{{ item.response.dateOfCommencement | date: 'dd-MM-yyyy' }}</td>
                              </ng-container>
                              <ng-template #noRecords>
                                <td colspan="10">
                                  <p>No records found</p>
                                  <button pButton pRipple type="button" class="p-button-raised p-button-info" (click)="navigateToBankAccountDetails()">Update Bank Account Details</button>
                                </td>
                              </ng-template>
                            </tr>
                          </tbody>
                        </table>
                      </div>
                    </div>
                    
                </div>
                <div class="flex flex-col mt-1 align-items-center justify-content-center">
                    <div class="flex flex-wrap gap-2">
                      <button pButton pRipple (click)="approve()" type="button" class="p-button-raised p-button-info">Approve</button>
                      <button pButton pRipple (click)="onRefresh()" type="button" class="p-button-raised p-button-info"> Refresh</button>
                    </div>
                </div>
                </div>
              </div>
            </div>
          </div>
