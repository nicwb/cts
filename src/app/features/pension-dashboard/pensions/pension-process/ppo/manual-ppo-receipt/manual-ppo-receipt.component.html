<div class="grid">
    <div class="col-12">
        <app-common-header [headerName]="'Manual PPO Receipt'" [imgSrc]="'assets/layout/images/icons/indent-entry.png'">
            <button pButton pRipple (click)="showInsertDialog()" type="button" icon="pi pi-plus" label="New Manual PPO Receipt"
                class="p-button-rounded p-button-raised"></button>
        </app-common-header>
    </div>
    <div class="col-12">
        <app-dynamic-table *ngIf="tableData" (actionButtonClicked)="handleButtonClick($event)"
            [numberRowsShown]="10" rowSelectionMode="multiple" [rowsPerPageOptions]="[10,30,50]"
            [headers]="tableData?.headers ?? []" [data]="tableData?.data ?? []" [dataCount]="tableData?.dataCount ?? 0">
        </app-dynamic-table>
    </div>
</div>
  
<p-dialog header="Manual PPO Receipt" [(visible)]="displayInsertModal" [modal]="true" [style]="{width: '45vw'}"
    [baseZIndex]="10000">
    <form [formGroup]="manualPpoForm" class="flex flex-column gap-4 mt-3">
        <div class="flex gap-2 xl:flex-row flex-column">
            <div class="flex-auto">
                <label for="Treasury Receipt Id:" class="block mb-1 text-color text-lg">Treasury Receipt Id:</label>
                <input type="number" pinputtext="" formControlName="treasuryReceiptId" placeholder="Treasury Receipt Id"
                    class="p-inputtext p-component p-element w-full">
            </div>
            <div class="flex-auto">
                <label for="PPO No" class="block mb-1 text-color text-lg">PPO No:</label>
                <input type="number" pinputtext="" formControlName="ppoNo" placeholder="PPO No"
                    class="p-inputtext p-component p-element w-full">
            </div>
        </div>
        
        <div class="flex gap-2 xl:flex-row flex-column">
            <div class="flex-auto">
                <label for="Pensioner's Name" class="block mb-1 text-color text-lg">Pensioner's Name:</label>
                <input type="text" pinputtext="" formControlName="pensionerName" placeholder="Pensioner's Name"
                    class="p-inputtext p-component p-element w-full">
            </div>
            <div class="flex-auto">
                <label for="dateOfCommencementOfPensionFamilyPension" class="block mb-1 text-color text-lg">Date of commencement of Pension/Family Pension:</label>
                <p-calendar class="p-component p-element w-full p-calendar" formControlName="dateOfCommencementOfPensionFamilyPension" placeholder="dd/mm/yyyy"
                    appendTo="body" [showIcon]="true" inputId="icon"></p-calendar>
            </div>
        </div>

        <div class="flex gap-2 xl:flex-row flex-column">
            <div class="flex-auto">
                <label for="mobileNo" class="block mb-1 text-color text-lg">Mobile No:</label>
                <input type="number" pinputtext="" formControlName="mobileNo" placeholder="Mobile No"
                    class="p-inputtext p-component p-element w-full">
            </div>
            <div class="flex-auto">
                <label for="dateOfReceipt" class="block mb-1 text-color text-lg">Date of Receipt:</label>
                <p-calendar class="p-component p-element w-full p-calendar" formControlName="dateOfReceipt" placeholder="dd/mm/yyyy"
                    appendTo="body" [showIcon]="true" inputId="icon"></p-calendar>
            </div>
        </div>
        <div class="flex gap-2 xl:flex-row flex-column">
            <div class="col-12 p-0 flex-auto">
                <label for="ppoIssuedBy" class="block mb-1 text-color text-lg">PPO Issued By:</label>
                <input type="text" pinputtext="" formControlName="ppoIssuedBy" placeholder="PPO Issued By"
                    class="p-inputtext p-component p-element w-full">
            </div>
            <div class="col-12 p-0 flex-auto">
                <label for="type" class="block mb-1 text-color text-lg">Type:</label>
                <input type="text" pinputtext="" formControlName="type" placeholder="Type"
                    class="p-inputtext p-component p-element w-full">
            </div>
        </div>
        <div class="flex gap-2 xl:flex-row flex-column">
            <div class="flex-auto">
                <label for="status" class="block mb-1 text-color text-lg">Status:</label>
                <input type="text" pinputtext="" formControlName="status" placeholder="Status"
                    class="p-inputtext p-component p-element w-full">
            </div>
            <div class="flex-auto">
                <label for="select" class="block mb-1 text-color text-lg">Select:</label>
                <input type="text" pinputtext="" formControlName="select" placeholder="Select"
                    class="p-inputtext p-component p-element w-full">
            </div>
        </div>
    </form>
    <div class="flex gap-2 justify-content-end pt-3">
        <button pbutton="" pripple="" label="Submit" (click)="addStampIndent()"
            class="p-element p-ripple p-button-rounded p-button p-component">
            <span class="p-button-label">Submit</span><span class="p-ink"></span>
        </button>
    </div>
</p-dialog>
<!-- <div class="col-12" *ngIf="displayInsertModal&&count>=1">
    <div class="card">
        <h5>Manual PPO Receipt</h5>
        <p-table #dt1 [value]="manualPpoForm.value" dataKey="treasuryReceiptId" [rows]="10" [loading]="loading" [rowHover]="true" styleClass="p-datatable-gridlines" [paginator]="true" [globalFilterFields]="['pensionerName','ppoNo','mobileNo','status']" responsiveLayout="scroll">
            <ng-template pTemplate="caption">
                <div class="flex justify-content-between flex-column sm:flex-row">
                    <button pButton label="Clear" class="p-button-outlined mb-2" icon="pi pi-filter-slash" (click)="clear(dt1)"></button>
                    <span class="p-input-icon-left mb-2">
                        <i class="pi pi-search"></i>
                        <input pInputText type="text" #filter (input)="onGlobalFilter(dt1, $event)" placeholder="Search Keyword" class="w-full"/>
                    </span>
                </div>
            </ng-template>
            <ng-template pTemplate="header">
                <tr>
                    <th style="min-width: 12rem">Treasury Receipt Id</th>
                    <th style="min-width: 12rem">PPO No</th>
                    <th style="min-width: 14rem">Pensioner's Name</th>
                    <th style="min-width: 12rem">Date of Commencement of Pension/Family Pension</th>
                    <th style="min-width: 10rem">Mobile No</th>
                    <th style="min-width: 10rem">Date of Receipt</th>
                    <th style="min-width: 10rem">PPO Issued By</th>
                    <th style="min-width: 10rem">Type</th>
                    <th style="min-width: 10rem">Status</th>
                    <th style="min-width: 10rem">Select</th>
                </tr>
            </ng-template>
            <ng-template pTemplate="body" let-rowData>
                <tr>
                    <td>{{rowData.treasuryReceiptId}}</td>
                    <td>{{rowData.ppoNo}}</td>
                    <td>{{rowData.pensionerName}}</td>
                    <td>{{rowData.dateOfCommencementOfPension}}</td>
                    <td>{{rowData.mobileNo}}</td>
                    <td>{{rowData.dateOfReceipt}}</td>
                    <td>{{rowData.issuedBy}}</td>
                    <td>{{rowData.type}}</td>
                    <td>{{rowData.status}}</td>
                    <td>{{rowData.select}}</td>
                </tr>
            </ng-template>
            <ng-template pTemplate="emptymessage">
                <tr>
                    <td colspan="6">No data found.</td>
                </tr>
            </ng-template>
            <ng-template pTemplate="loadingbody">
                <tr>
                    <td colspan="6">Loading data. Please wait.</td>
                </tr>
            </ng-template>
        </p-table>
    </div>
</div> -->
<div class="col-12" *ngIf="modalData.length > 0">
    <p-table [value]="modalData">
        <ng-template pTemplate="header">
            <tr>
                <th>Treasury Receipt Id</th>
                <th>PPO No</th>
                <th>Pensioner's Name</th>
                <th>Date of Commencement</th>
                <th>Mobile No</th>
                <th>Date of Receipt</th>
                <th>PPO Issued By</th>
                <th>Type</th>
                <th>Status</th>
                <th>Select</th>
            </tr>
        </ng-template>
        <ng-template pTemplate="body" let-data>
            <tr>
                <td>{{ data.treasuryReceiptId }}</td>
                <td>{{ data.ppoNo }}</td>
                <td>{{ data.pensionerName }}</td>
                <td>{{ data.dateOfCommencementOfPensionFamilyPension }}</td>
                <td>{{ data.mobileNo }}</td>
                <td>{{ data.dateOfReceipt }}</td>
                <td>{{ data.ppoIssuedBy }}</td>
                <td>{{ data.type }}</td>
                <td>{{ data.status }}</td>
                <td>{{ data.select }}</td>
            </tr>
        </ng-template>
    </p-table>
</div>