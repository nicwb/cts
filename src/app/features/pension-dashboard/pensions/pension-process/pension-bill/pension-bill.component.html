<div class="container">
    <form [formGroup]="pensionForm">
        <!-- <div class="grid"> -->
        <!-- <div class="col-12"> -->
        <div class="card">
            <div>
                <h3
                    class="text-4xl font-bold text-gray-900 leading-tight mb-2 border-t-4 border-b-4 border-purple-600 py-4"
                >
                    First Pension Bill Generation
                </h3>
                <p class="text-lg text-gray-800 mb-8">
                    This section captures the First Pension Bill Generation details for a
                    Pensioner. The information from here will be used for
                    identifying the Pensioner.
                </p>

                <!-- <div class="flex flex-column gap-4 mt-6">
                    <p-steps [model]="steps" [(activeIndex)]="currentStepIndex"></p-steps>
                    <div class="my-4 px-4"> -->
                <!-- Step 1: Pension Details -->
                <!-- <div *ngIf="currentStepIndex === 0" class="flex flex-column gap-3"> -->
                <div class="col-12 md:col-12">
                    <div class="card mx-5">
                        <h5>PPO ID Details:</h5>

                        <div class="grid col-12">
                            <label for="PpoId" class="col-12 md:col-2">
                                PPO ID:
                            </label>
                            <input
                                class="col-12 md:col-6"
                                id="PpoId"
                                type="text"
                                pInputText
                                formControlName="ppoId"
                                placeholder="PPO ID"
                            />
                            <button
                                pButton
                                type="button"
                                icon="pi pi-search"
                                (click)=" openSearchPopup()"
                            ></button>
                        </div>
                    </div>
                </div>
                <!-- Step 2: Pensioner Details -->
                <div class="flex justify-center card mx-6">
                    <br />

                    <div class="p-fluid p-formgrid grid md:col-12">
                        <div class="col-12 md:col-12">
                            <h5>Pension Details</h5>
                        </div>
                        <!-- <div class="field col-12 md:col-4">
                            <label htmlFor="ppoId">PPO ID</label>
                            <input pInputText id="ppoId" type="text" formControlName="ppoId" />
                            <div *ngIf="pensionForm.get('ppoId')?.errors && pensionForm.get('ppoId')?.touched">
                                <div *ngIf="pensionForm.get('ppoId')?.errors?.['required']" class="p-error">
                                    Please enter PPO ID
                                </div>
                            </div>

                        </div> -->
                        <div class="field col-12 md:col-4">
                            <label htmlFor="ppoNo">PPO NO</label>
                            <input
                                pInputText
                                id="ppoNo"
                                type="text"
                                formControlName="ppoNo"
                            />
                            <div
                                *ngIf="
                                    pensionForm.get('ppoNo')?.errors &&
                                    pensionForm.get('ppoNo')?.touched
                                "
                            >
                                <div
                                    *ngIf="pensionForm.get('ppoNo')?.errors?.['required']"
                                    class="p-error"
                                >
                                    Please enter PPO No
                                </div>
                            </div>
                        </div>
                        <div class="field col-12 md:col-4">
                            <label htmlFor="pensionerName"
                                >Pensioner Name</label
                            >
                            <input
                                pInputText
                                id="pensionerName"
                                type="text"
                                formControlName="pensionerName"
                            />
                            <div
                                *ngIf="
                                    pensionForm.get('pensionerName')?.errors &&
                                    pensionForm.get('pensionerName')?.touched
                                "
                            >
                                <div
                                    *ngIf="pensionForm.get('pensionerName')?.errors?.['required']"
                                    class="p-error"
                                >
                                    Please enter pensioner name
                                </div>
                            </div>
                        </div>
                        <div class="field col-12 md:col-4">
                            <label htmlFor="periodFrom">Period From</label>
                            <input
                                pInputText
                                id="periodFrom"
                                formControlName="periodFrom"
                                type="date"
                            />
                            <div
                                *ngIf="
                                    pensionForm.get('periodFrom')?.errors &&
                                    pensionForm.get('periodFrom')?.touched
                                "
                            >
                                <div
                                    *ngIf="pensionForm.get('periodFrom')?.errors?.['required']"
                                    class="p-error"
                                >
                                    Please enter period from
                                </div>
                            </div>
                        </div>
                        <div class="field col-12 md:col-4">
                            <label htmlFor="periodTo">Period To</label>
                            <input
                                pInputText
                                id="periodTo"
                                type="date"
                                formControlName="periodTo"
                            />
                            <div
                                *ngIf="
                                    pensionForm.get('periodTo')?.errors &&
                                    pensionForm.get('periodTo')?.touched
                                "
                            >
                                <div
                                    *ngIf="pensionForm.get('periodTo')?.errors?.['required']"
                                    class="p-error"
                                >
                                    Please enter period to
                                </div>
                            </div>
                        </div>
                        <div class="field col-12 md:col-4">
                            <label htmlFor="bankName">Bank Name</label>
                            <input
                                pInputText
                                id="bankName"
                                type="text"
                                formControlName="bankName"
                            />
                            <div
                                *ngIf="
                                    pensionForm.get('bankName')?.errors &&
                                    pensionForm.get('bankName')?.touched
                                "
                            >
                                <div
                                    *ngIf="pensionForm.get('bankName')?.errors?.['required']"
                                    class="p-error"
                                >
                                    Please enter bank name
                                </div>
                            </div>
                        </div>
                        <div class="field col-12 md:col-4">
                            <label htmlFor="accountNo">Account NO</label>
                            <input
                                pInputText
                                id="accountNo"
                                type="number"
                                class="remove-arrow"
                                formControlName="accountNo"
                            />
                            <div
                                *ngIf="
                                    pensionForm.get('accountNo')?.errors &&
                                    pensionForm.get('accountNo')?.touched
                                "
                            >
                                <div
                                    *ngIf="pensionForm.get('accountNo')?.errors?.['required']"
                                    class="p-error"
                                >
                                    Please enter account no
                                </div>
                            </div>
                        </div>
                        <div class="field col-12 md:col-4">
                            <label htmlFor="billDate">Bill Date</label>
                            <input
                                pInputText
                                id="billDate"
                                type="date"
                                formControlName="billDate"
                            />
                            <div
                                *ngIf="
                                    pensionForm.get('billDate')?.errors &&
                                    pensionForm.get('billDate')?.touched
                                "
                            >
                                <div
                                    *ngIf="pensionForm.get('billDate')?.errors?.['required']"
                                    class="p-error"
                                >
                                    Please enter bill date
                                </div>
                            </div>
                        </div>
                        <div class="field col-12 md:col-4">
                            <label htmlFor="paymentMode">Payment Mode</label>
                            <p-dropdown
                                optionLabel="name"
                                formControlName="paymentMode"
                                [options]="dropdownItems"
                            ></p-dropdown>
                            <div
                                *ngIf="
                                    pensionForm.get('paymentMode')?.errors &&
                                    pensionForm.get('paymentMode')?.touched
                                "
                            >
                                <div
                                    *ngIf="pensionForm.get('paymentMode')?.errors?.['required']"
                                    class="p-error"
                                >
                                    Please enter payment mode
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- </div> -->

                <!-- Step 2: Bill Details -->
                <!-- <div *ngIf="currentStepIndex === 1" class="flex flex-column gap-3"> -->
                <div class="flex justify-center card mx-6">
                    <div class="col-12">
                        <h5>Bill Details</h5>
                        <p-toast></p-toast>
                        <p-table
                            [value]="products"
                            dataKey="name"
                            [expandedRowKeys]="expandedRows"
                            responsiveLayout="scroll"
                        >
                            <ng-template pTemplate="caption">
                                <button
                                    pButton
                                    icon="pi pi-fw {{
                                        isExpanded ? 'pi-minus' : 'pi-plus'
                                    }}"
                                    label="{{
                                        isExpanded
                                            ? 'Collapse All'
                                            : 'Expand All'
                                    }}"
                                    (click)="expandAll()"
                                ></button>
                            </ng-template>
                            <ng-template pTemplate="header">
                                <tr>
                                    <th></th>
                                    <th pSortableColumn="Bill NO">
                                        Bill NO
                                        <p-sortIcon
                                            field="Bill NO"
                                        ></p-sortIcon>
                                    </th>
                                    <th pSortableColumn="Description">
                                        Description
                                        <p-sortIcon
                                            field="Description"
                                        ></p-sortIcon>
                                    </th>
                                    <th pSortableColumn="Account Head">
                                        Account Head
                                        <p-sortIcon
                                            field="Account Head"
                                        ></p-sortIcon>
                                    </th>
                                    <th pSortableColumn="Gross Amount">
                                        Gross Amount
                                        <p-sortIcon
                                            field="Gross Amount"
                                        ></p-sortIcon>
                                    </th>
                                    <th pSortableColumn="By Transfer">
                                        By Transfer
                                        <p-sortIcon
                                            field="By Transfer"
                                        ></p-sortIcon>
                                    </th>
                                    <th pSortableColumn="Net Amount">
                                        Net Amount
                                        <p-sortIcon
                                            field="Net Amount"
                                        ></p-sortIcon>
                                    </th>
                                    <th pSortableColumn="Remarks">
                                        Remarks
                                        <p-sortIcon
                                            field="Remarks"
                                        ></p-sortIcon>
                                    </th>
                                </tr>
                            </ng-template>
                            <ng-template
                                pTemplate="body"
                                let-product
                                let-expanded="expanded"
                            >
                                <tr>
                                    <td style="min-width: 12rem"></td>
                                    <td style="min-width: 12rem">
                                        {{ product.name }}
                                    </td>
                                    <td>
                                        <img
                                            [src]="
                                                'assets/demo/images/product/' +
                                                product.image
                                            "
                                            [alt]="product.name"
                                            width="100"
                                            class="shadow-4"
                                        />
                                    </td>
                                    <td style="min-width: 8rem">
                                        {{ product.price | currency : "USD" }}
                                    </td>
                                    <td style="min-width: 10rem">
                                        {{ product.category }}
                                    </td>
                                    <td style="min-width: 10rem">
                                        <p-rating
                                            [ngModel]="product.rating"
                                            [readonly]="true"
                                            [cancel]="false"
                                        ></p-rating>
                                    </td>
                                    <td>
                                        <span
                                            [class]="
                                                'product-badge status-' +
                                                product.inventoryStatus.toLowerCase()
                                            "
                                            >{{ product.inventoryStatus }}</span
                                        >
                                    </td>
                                </tr>
                            </ng-template>
                        </p-table>
                    </div>
                </div>
                <!-- </div> -->

                <!-- Step 3: Component Details -->
                <!-- <div *ngIf="currentStepIndex === 2" class="flex flex-column gap-3"> -->
                <div class="flex justify-center card mx-6">
                    <div class="col-12">
                        <h5>Component Details</h5>
                        <p-toast></p-toast>
                        <p-table
                            [value]="products"
                            dataKey="name"
                            [expandedRowKeys]="expandedRows"
                            responsiveLayout="scroll"
                        >
                            <ng-template pTemplate="caption">
                                <button
                                    pButton
                                    icon="pi pi-fw {{
                                        isExpanded ? 'pi-minus' : 'pi-plus'
                                    }}"
                                    label="{{
                                        isExpanded
                                            ? 'Collapse All'
                                            : 'Expand All'
                                    }}"
                                    (click)="expandAll()"
                                ></button>
                            </ng-template>
                            <ng-template pTemplate="header">
                                <tr>
                                    <th pSortableColumn="Component Id">
                                        Component Id<p-sortIcon
                                            field="Component Id"
                                        ></p-sortIcon>
                                    </th>
                                    <th pSortableColumn="Description">
                                        Description<p-sortIcon
                                            field="Description"
                                        ></p-sortIcon>
                                    </th>
                                    <th pSortableColumn="From Date">
                                        From Date<p-sortIcon
                                            field="From Date"
                                        ></p-sortIcon>
                                    </th>
                                    <th pSortableColumn="To Date">
                                        To Date<p-sortIcon
                                            field="To Date"
                                        ></p-sortIcon>
                                    </th>
                                    <th pSortableColumn="Rate">
                                        Rate<p-sortIcon
                                            field="Rate"
                                        ></p-sortIcon>
                                    </th>
                                    <th pSortableColumn="Net Amount">
                                        Net Amount<p-sortIcon
                                            field="Net Amount"
                                        ></p-sortIcon>
                                    </th>
                                    <th pSortableColumn="Remark">
                                        Remark<p-sortIcon
                                            field="Remark"
                                        ></p-sortIcon>
                                    </th>
                                </tr>
                            </ng-template>
                            <ng-template
                                pTemplate="body"
                                let-product
                                let-expanded="expanded"
                            >
                                <tr>
                                    <td style="min-width: 12rem"></td>
                                    <td style="min-width: 12rem">
                                        {{ product.name }}
                                    </td>
                                    <td>
                                        <img
                                            [src]="
                                                'assets/demo/images/product/' +
                                                product.image
                                            "
                                            [alt]="product.name"
                                            width="100"
                                            class="shadow-4"
                                        />
                                    </td>
                                </tr>
                            </ng-template>
                        </p-table>
                    </div>
                </div>
                <!-- </div> -->
            </div>

            <!-- <div class="flex flex-col mt-1 align-items-center justify-content-center">
                    <div class="flex flex-wrap gap-2">
                        <p-button *ngIf="currentStepIndex > 0" label="Back" icon="pi pi-step-backward"
                            styleClass="p-button-warning" (click)="prev()">
                        </p-button>
                        <p-button *ngIf="currentStepIndex < 2" label="Next" icon="pi pi-step-forward"
                            styleClass="p-button-success" (click)="next()" [disabled]="!isCurrentStepValid">
                        </p-button>
                        <p-button *ngIf="currentStepIndex > 1" label="Save" icon="pi pi-cloud-upload" (click)="save()">
                        </p-button>
                    </div>
                </div> -->
            <!-- </div> -->
            <!-- </div> -->
            <!-- </div> -->
            <!-- </div> -->
            <div class="flex justify-center card mx-6 mt-5">
                <div class="col-12">
                    <h5>Component Detail</h5>
                    <p-toast></p-toast>
                    <p-table
                        [value]="products"
                        dataKey="name"
                        [expandedRowKeys]="expandedRows"
                        responsiveLayout="scroll"
                    >
                        <ng-template pTemplate="caption">
                            <button
                                pButton
                                icon="pi pi-fw {{
                                    isExpanded ? 'pi-minus' : 'pi-plus'
                                }}"
                                label="{{
                                    isExpanded ? 'Collapse All' : 'Expand All'
                                }}"
                                (click)="expandAll()"
                            ></button>
                            <div class="flex table-header"></div>
                        </ng-template>
                        <ng-template pTemplate="header">
                            <tr>
                                <th pSortableColumn="Component Id">
                                    Component Id<p-sortIcon
                                        field="Component Id"
                                    ></p-sortIcon>
                                </th>
                                <th pSortableColumn="Description">
                                    Description<p-sortIcon
                                        field="Component Id"
                                    ></p-sortIcon>
                                </th>
                                <th pSortableColumn="Component Id">
                                    From Date<p-sortIcon
                                        field="Component Id"
                                    ></p-sortIcon>
                                </th>
                                <th pSortableColumn="Component Id">
                                    To Date<p-sortIcon
                                        field="Component Id"
                                    ></p-sortIcon>
                                </th>
                                <th pSortableColumn="Component Id">
                                    Rate<p-sortIcon
                                        field="Component Id"
                                    ></p-sortIcon>
                                </th>
                                <th pSortableColumn="Component Id">
                                    Net Amount<p-sortIcon
                                        field="Component Id"
                                    ></p-sortIcon>
                                </th>
                                <th pSortableColumn="Component Id">
                                    Remark<p-sortIcon
                                        field="Component Id"
                                    ></p-sortIcon>
                                </th>
                            </tr>
                        </ng-template>
                        <ng-template
                            pTemplate="body"
                            let-product
                            let-expanded="expanded"
                        >
                            <tr>
                                <td style="min-width: 12rem"></td>
                                <td style="min-width: 12rem">
                                    {{ product.name }}
                                </td>
                                <td>
                                    <img
                                        [src]="
                                            'assets/demo/images/product/' +
                                            product.image
                                        "
                                        [alt]="product.name"
                                        width="100"
                                        class="shadow-4"
                                    />
                                </td>
                                <!-- <td style="min-width: 8rem;">{{product.price | currency:'USD'}}</td> -->
                                <!-- <td style="min-width: 10rem;">{{product.category}}</td> -->
                                <!-- <td style="min-width: 10rem;"><p-rating [ngModel]="product.rating" [readonly]="true" [cancel]="false"></p-rating></td> -->
                                <!-- <td><span [class]="'product-badge status-' + product.inventoryStatus.toLowerCase()">{{product.inventoryStatus}}</span></td> -->
                            </tr>
                        </ng-template>
                    </p-table>
                </div>

            </div>
            <div class="flex flex-col mt-1 align-items-center justify-content-center">
                <div class="flex flex-wrap gap-2">
                    <button type="submit" pButton pRipple >Submit</button>
                </div>
            </div>
        </div>
    </form>
</div>
