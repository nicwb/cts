<form [formGroup]="ComponentRateForm" (ngSubmit)="onSubmit($event)">
    <div class="container mx-auto">
        <div class="card" style="width: 95%; align-items: center">
            <p-fieldset
                legend="Component Rate"
                class="line-height-3 m-0 text-lg"
            >
                <div class="p-fluid p-formgrid grid">
                    <div class="field col-12">
                        <div class="p-input-icon-right">
                            <div>
                                <label
                                    htmlFor="selectPensionProperty"
                                    class="text-lg"
                                    >Select Pension Category</label
                                >
                            </div>

                            <input
                                [ngStyle]="{ 'border-color': 'black' }"
                                class="bg-cyan-100"
                                style="width: 95%"
                                pInputText
                                pInputText
                                type="text"
                                formControlName="categoryName"
                            />

                            <app-popup-table
                                name=""
                                [service$]="allPensionCategory$"
                                (return)="
                                    handleSelectedRowByPensionCategory($event)
                                "
                            ></app-popup-table>
                        </div>
                    </div>
                    <div class="field col-12 md:col-6">
                        <div class="p-input-icon-right">
                            <label htmlFor="selectComponent" class="text-lg"
                                >Select Component</label
                            >
                            <input
                                [ngStyle]="{ 'border-color': 'black' }"
                                class="bg-cyan-100"
                                style="width: 91%"
                                pInputText
                                type="text"
                                formControlName="componentName"
                            />

                            <app-popup-table
                                name=""
                                [service$]="pensionComponent$"
                                (return)="
                                    handleSelectedRowByPensionComponent($event)
                                "
                            ></app-popup-table>
                        </div>
                    </div>

                    <div class="field col-12 md:col-6">
                        <div class="">
                            <label htmlFor="date" class="text-lg">Date</label>

                            <p-calendar
                                formControlName="effectiveFromDate"
                            ></p-calendar>
                        </div>
                    </div>
                    <div class="field col-12 md:col-6">
                        <label class="text-lg">Rate Type P/A</label>
                        <p-dropdown
                            (onChange)="onSelectRtaeRateType($event)"
                            [options]="[
                                { label: 'A', value: 'A' },
                                { label: 'P', value: 'P' }
                            ]"
                            formControlName="rateType"
                        ></p-dropdown>
                    </div>
                    <div class="field col-12 md:col-6">
                        <label class="text-lg">Amount</label>
                        <input
                            pInputText
                            type="text"
                            formControlName="rateAmount"
                            [placeholder]="amountPlaceHolder"
                        />
                    </div>
                </div>

                <div
                    class="flex flex-col mt-1 align-items-center justify-content-center"
                >
                    <!-- Save Button -->
                    <div class="flex flex-wrap gap-2 mx-2">
                        <button
                            type="submit"
                            pButton
                            pRipple
                            
                            class="px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-opacity-50"
                            [disabled]="!ComponentRateForm.valid"
                        >
                            <i class="pi pi-check mr-2"></i> Submit
                        </button>
                    </div>

                    <!-- Refresh Button -->
                    <div class="flex flex-wrap gap-2 mx-2">
                        <button
                            type="button"
                            pButton
                            pRipple
                            (click)="resetAndReload()"
                            class="px-3 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50"
                        >
                            <i class="pi pi-refresh mr-2"></i>Refresh
                        </button>
                    </div>
                </div>
            </p-fieldset>

            <!-- for ListView table -->
            <div *ngIf="data">
                <div class="flex justify-center card mx-6 mt-2 py-0">
                    <div class="col-12">
                        <h5>Component Detail</h5>
                        <hr class="border-b-2 h-10 border-dashed" />

                        <p-table
                            [value]="records"
                            class="justify-center"
                            [scrollable]="true"
                            scrollHeight="600px"
                            [loading]="loading"
                        >
                            <ng-template pTemplate="header">
                                <tr>
                                    <th
                                        *ngFor="let col of cols"
                                        pSortableColumn="{{ col.field }}"
                                    >
                                        {{ col.header
                                        }}<p-sortIcon
                                            [field]="col.field"
                                        ></p-sortIcon>
                                    </th>
                                </tr>
                            </ng-template>

                            <ng-template pTemplate="body" let-record>
                                <tr>
                                    <td *ngFor="let col of cols">
                                        {{ record[col.field] }}
                                    </td>
                                </tr>
                            </ng-template>

                            <!-- <ng-template pTemplate="footer">
                                <tr>
                                    <td colspan="5"></td>
                                    <td>Total Component Amount: 0</td>
                                    <td></td>
                                </tr>
                            </ng-template> -->
                        </p-table>
                    </div>
                </div>
            </div>
        </div>
    </div>
</form>
