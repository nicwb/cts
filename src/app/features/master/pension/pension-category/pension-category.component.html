<div class="grid">
    <div class="col-12">
        <app-common-header
            [headerName]="'Pension Caregory Details'"
            [imgSrc]="'assets/layout/images/icons/indent-entry.png'"
        >
            <button
                pButton
                pRipple
                (click)="showInsertDialog()"
                type="button"
                icon="pi pi-plus"
                label="New"
                class="p-button-rounded p-button-raised"
            ></button>
            <button
                pButton
                pRipple
                (click)="fun_refresh()"
                *ngIf="refresh_b"
                type="button"
                icon="pi pi-refresh"
                label="Reset"
                class="p-button-rounded p-button-raised"
            ></button>
        </app-common-header>
    </div>
    <div class="col-12">
        <mh-prime-dynamic-table
            size="small"
            [data]="tableData"
            [numberRowsShown]="10"
            [rowsPerPageOptions]="[10, 30, 50, 100]"
            [showTopMenubar]="true"
            [isLoading]="isTableDataLoading"
            [actionButtons]="tableActionButton"
            [childActionButtons]="tableChildActionButton"
            (rowSelect)="handleRowSelection($event)"
            (queryParameterChange)="handQueryParameterChange($event)"
            (searchKeyChange)="handsearchKeyChange($event)"
        ></mh-prime-dynamic-table>
    </div>
</div>

<p-dialog
    header="Pension Category Details"
    [(visible)]="displayInsertModal"
    [modal]="true"
    [style]="{ width: '30vw', height: '45vh' }"
    [baseZIndex]="10000"
>
    <!-- <form [formGroup]="PensionForm" class="flex flex-column gap-4 mt-3"> -->
        <div class="flex gap-4 xl:flex-row flex-column">
            <div class="flex-auto w-full">
                <label
                    for="pensionerName"
                    class="flex-auto block mb-1 text-color text-lg"
                    >Primary Category Name:</label
                >
                <p-dropdown
                    [options]="primary_id_select"
                    [(ngModel)]="primary_id"
                    [filter]="true"
                    filterBy="label"
                    [showClear]="true"
                    placeholder="Select a PrimaryCategoryName"
                    class="w-full"
                    (onFilter)="find_extra_primary_id($event)"

                >
                    <ng-template pTemplate="selectedItem">
                        <div >
                            <div>{{ primary_id }}</div>
                        </div>
                    </ng-template>
                    <ng-template let-id pTemplate="item">
                        <div >
                            <div (click)="clicked_Primary(id.value, id.label)">
                                {{ id.label }}
                            </div>
                        </div>
                    </ng-template>
                </p-dropdown>
                <!-- <span class="p-input-icon-right w-full">
                    <input
                        type="text"
                        [(ngModel)]="primary_id"
                        [ngModelOptions]="{ standalone: true }"
                        placeholder="Eg: HoaID"
                        class="p-inputtext p-component p-element w-full"
                        id="hoaID"
                        (click)="get_id_from_primary_category()"
                    />
                    <i
                        class="pi pi-search"
                        (click)="find_extra_primary_id()"
                    ></i>
                </span>
                <p-table [value]="primary_id_select" *ngIf="primary_table">
                    <ng-template pTemplate="header">
                        <tr>
                            <th>HoaID</th>
                        </tr>
                    </ng-template>
                    <ng-template pTemplate="body" let-id>
                        <tr>
                            <td (click)="clicked_Primary(id.value, id.label)">
                                {{ id.label }}
                            </td>
                        </tr>
                    </ng-template>
                </p-table> -->
            </div>
            <div class="flex-auto w-full">
                <label
                    for="pensionerName"
                    class="flex-auto block mb-1 text-color text-lg"
                    >Sub Category Name:</label
                >
                <!-- <span class="p-input-icon-right w-full">
                    <input
                        type="text"
                        [(ngModel)]="sub_id"
                        [ngModelOptions]="{ standalone: true }"
                        placeholder="Eg: SubCategoryName"
                        class="p-inputtext p-component p-element w-full"
                        id="subId"
                        (click)="get_id_from_sub_category()"
                    />
                    <i
                        class="pi pi-search"
                        (click)="find_extra_sub_id()"
                    ></i>
                </span>
                <p-table [value]="sub_id_select" *ngIf="sub_table">
                    <ng-template pTemplate="header">
                        <tr>
                            <th>SubCategoryName</th>
                        </tr>
                    </ng-template>
                    <ng-template pTemplate="body" let-id>
                        <tr>
                            <td (click)="clicked_Sub(id.value, id.label)">
                                {{ id.label }}
                            </td>
                        </tr>
                    </ng-template>
                </p-table> -->
                <p-dropdown
                    #subFilterSearch
                    [options]="sub_id_select"
                    [(ngModel)]="sub_id"
                    [filter]="true"
                    filterBy="label"
                    [showClear]="true"
                    placeholder="Select a SubCategoryName"
                    class="w-full"
                    (onFilter)="find_extra_sub_id($event)"

                >
                    <ng-template pTemplate="selectedItem">
                        <div >
                            <div>{{ sub_id }}</div>
                        </div>
                    </ng-template>
                    <ng-template let-id pTemplate="item">
                        <div >
                            <div (click)="clicked_Sub(id.value, id.label)">
                                {{ id.label }}
                            </div>
                        </div>
                    </ng-template>
                </p-dropdown>
            </div>
        </div>
    <!-- </form> -->
    <div class="flex gap-2 justify-content-end pt-3">
        <button
            pButton
            label="Submit"
            (click)="add_Pension_category()"
            class="p-element p-ripple p-button-rounded p-button p-component"
            [disabled]="!PensionForm.valid"
        ></button>
        <button
            pButton
            label="Cancel"
            (click)="cancelPensionCategory()"
            class="p-element p-ripple p-button-rounded p-button p-component"
        ></button>
    </div>
</p-dialog>
