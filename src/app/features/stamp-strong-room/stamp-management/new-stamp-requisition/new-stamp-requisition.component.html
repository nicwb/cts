<div class="grid">
    <div class="col-12">
        <app-common-header [headerName]="'New Requisition'" [imgSrc]="'assets/layout/images/icons/new-requisition.png'">
        </app-common-header>
    </div>
</div>
<section class="px-4 py-2 mx-auto w-full flex align-items-center justify-content-center">
    <div class="surface-card px-8 py-6 shadow-2 border-round p-fluid">
        <div class="grid formgrid p-fluid">
            <div class="py-4 w-full">
                <h1 class="font-bold">Summary</h1>
                <div class="flex gap-2 align-items-end w-full">
                    <div class="flex-1">
                        <label for="totalAmount" class="block mb-1 font-medium text-900">Total Amount</label>
                        <input type="text" pinputtext="" readonly disabled [value]="totalAmount"
                            class="p-inputtext p-component p-element w-full">
                    </div>
                    <div class="flex-1">
                        <label for="totalDiscountAmount" class="block mb-1 font-medium text-900">Total Discount
                            Amount</label>
                        <input type="number" pinputtext="" readonly disabled [value]="totalDiscountAmount"
                            class="p-inputtext p-component p-element w-full">
                    </div>
                    <div class="flex-1">
                        <label for="totalTaxAmount" class="block mb-1 font-medium text-900">Total Tax Amount</label>
                        <input pinputtext="" placeholder="Eg: 10" type="number" [value]="totalTaxAmount"
                            class="p-inputtext p-component p-element w-full">
                    </div>
                    <div class="flex-1">
                        <label for="totalNetAmount" class="block mb-1 font-medium text-900">Total Net Amount</label>
                        <input type="text" pinputtext="" readonly disabled [value]="totalNetAmount"
                            class="p-inputtext p-component p-element w-full">
                    </div>
                </div>
            </div>
            <hr class="w-full pt-4">

            <!-- <div class="field mb-4 col-12 md:col-12">
                <label for="requisitionNo" class="font-medium text-900">Requisition No</label>
                <input type="text" pinputtext="" formControlName="requisitionNo" class="p-inputtext p-component p-element">
                <div *ngIf="newStampRequisitionForm.controls['requisitionNo'].errors && (newStampRequisitionForm.controls['requisitionNo'].dirty || newStampRequisitionForm.controls['requisitionNo'].touched)">
                    <small class="p-error" *ngIf="newStampRequisitionForm.controls['requisitionNo'].errors['required']">Requisution No is required.</small>
                </div>
            </div>
            <div class="surface-border border-top-1 opacity-50 my-4 col-12"></div>
            <div class="field mb-4 col-12 md:col-6">
                <label for="combination" class="font-medium text-900">Combination</label>
                <app-stamp-combination-dropdown
                (StampCombinationSelected)="onStampCombinationSelected($event)"
              ></app-stamp-combination-dropdown>
            </div>
            <div class="field mb-4 col-12 md:col-6">
                <label for="vendorDetails" class="font-medium text-900">Vendor Details</label>
                <app-vendor-details-dropdown (VendorDetailsSelected)="onVendorDetailsSelected($event)"></app-vendor-details-dropdown>
            </div>
            <div class="field mb-4 col-12 md:col-6">
                <label for="requisitionDate" class="font-medium text-900">Requisution Date</label>
                <p-calendar [minDate]="minDateLimit" class="p-component p-element w-full p-calendar" formControlName="requisitionDate" placeholder="mm/dd/yyyy" appendTo="body" [showIcon]="true" inputId="icon"></p-calendar>
                <div *ngIf="newStampRequisitionForm.controls['requisitionDate'].errors && (newStampRequisitionForm.controls['requisitionDate'].dirty || newStampRequisitionForm.controls['requisitionDate'].touched)">
                    <small class="p-error" *ngIf="newStampRequisitionForm.controls['requisitionDate'].errors['required']">Requisution Date is required.</small>
                </div>
            </div>
            <div class="field mb-4 col-12 md:col-6">
                <label for="sheet" class="font-medium text-900">Sheet</label>
                <input formControlName="sheet" type="text" [(ngModel)]="sheet" (ngModelChange)="sheetSelected($event)" pinputtext="" class="p-inputtext p-component p-element">
                <div *ngIf="newStampRequisitionForm.controls['sheet'].errors && (newStampRequisitionForm.controls['sheet'].dirty || newStampRequisitionForm.controls['sheet'].touched)">
                    <small class="p-error" *ngIf="newStampRequisitionForm.controls['sheet'].errors['required']">No of Sheets is required.</small>
                    <small class="p-error" *ngIf="newStampRequisitionForm.controls['sheet'].errors['min']">Minimun no of sheets is 1.</small>
                </div>
            </div>
            <div class="field mb-4 col-12 md:col-6">
                <label for="label" class="font-medium text-900">Label</label>
                <input type="text" formControlName="label" pinputtext="" [(ngModel)]="label" (ngModelChange)="labelSelected($event)" class="p-inputtext p-component p-element">
                <div *ngIf="newStampRequisitionForm.controls['label'].errors && (newStampRequisitionForm.controls['label'].dirty || newStampRequisitionForm.controls['label'].touched)">
                    <small class="p-error" *ngIf="newStampRequisitionForm.controls['label'].errors['required']">No of labels is required.</small>
                    <small class="p-error" *ngIf="newStampRequisitionForm.controls['label'].errors['min']">Minimun no of labels is 1.</small>
                </div>
            </div>
            
            <div class="field mb-4 col-6 md:col-6">
                <label for="quantity" class="font-medium text-900">Quantity</label>
                <input id="quantity" type="text" [value]="quantity" pinputtext="" readonly disabled class="p-inputtext p-component p-element">
            </div>
            <div class="field mb-4 col-6 md:col-6">
                <label for="amount" class="font-medium text-900">Amount</label>
                <input id="amount" type="text" pinputtext="" [value]="amount" readonly disabled class="p-inputtext p-component p-element">
            </div>
            <div class="field mb-4 col-12 md:col-6">
                <label for="discountAmount" class="font-medium text-900">Discount Amount</label>
                <input id="discountAmount" type="text" pinputtext="" [value]="discountAmount" readonly disabled class="p-inputtext p-component p-element">
            </div>
            <div class="field mb-4 col-6 md:col-6">
                <label for="taxAmount" class="font-medium text-900">Tax Amount</label>
                <input id="taxAmount" type="text" pinputtext="" [value]="taxAmount" readonly disabled class="p-inputtext p-component p-element">
            </div>
            <div class="field mb-4 col-6 md:col-6">
                <label for="challanAmount" class="font-medium text-900">Challan Amount</label>
                <input id="challanAmount" type="text" pinputtext="" [value]="challanAmount" readonly disabled class="p-inputtext p-component p-element">
            </div> -->
            <div class="flex gap-2 align-items-end w-full">
                <div class="p-0 flex-1">
                    <label for="Category" class="block mb-1 font-medium text-900">Combination</label>
                    <app-stamp-combination-dropdown
                        (StampCombinationSelected)="onStampCombinationSelected($event)"></app-stamp-combination-dropdown>
                </div>
                <div class="flex-1">
                    <label for="vendorDetails" class="font-medium text-900">Vendor Details</label>
                    <!-- <app-vendor-details-dropdown  (VendorDetailsSelected)="onVendorDetailsSelected($event)"></app-vendor-details-dropdown> -->
                    <app-vendor-details-dropdown [ngClass]="{ 'pointer-events-none': !isVendorSelect }" (VendorDetailsSelected)="onVendorDetailsSelected($event)">
                    </app-vendor-details-dropdown>
                </div>
                <div class="flex-1">
                    <label for="Category" class="block mb-1 font-medium text-900">Category</label>
                    <input type="text" pinputtext="" readonly disabled [value]="category"
                        class="p-inputtext p-component p-element w-full">
                </div>
                <div class="flex-1">
                    <label for="denomination" class="block mb-1 font-medium text-900">Denomination (Rs.)</label>
                    <input type="number" pinputtext="" readonly disabled [value]="denomination"
                        class="p-inputtext p-component p-element w-full">
                </div>
                <div class="flex-1">
                    <label for="quantity" class="block mb-1 font-medium text-900">Quantity</label>
                    <input pinputtext="" placeholder="Eg: 10" type="number" [(ngModel)]="quantity"
                        (ngModelChange)="onQuantityChange($event)" [value]="quantity"
                        class="p-inputtext p-component p-element w-full">
                </div>
                <div class="flex-1">
                    <label for="grossAmount" class="block mb-1 font-medium text-900">Gross Amount (Rs.)</label>
                    <input type="text" pinputtext="" readonly disabled [value]="amount"
                        class="p-inputtext p-component p-element w-full">
                </div>
                <div class="flex-1">
                    <label for="discount" class="block mb-1 font-medium text-900">Discount</label>
                    <input pinputtext="" [value]="discountAmount" disabled
                        class="p-inputtext p-component p-element w-full">
                </div>
                <div class="flex-1">
                    <label for="tax" class="block mb-1 font-medium text-900">Tax</label>
                    <input type="text" pinputtext="" readonly disabled [value]="taxAmount"
                        class="p-inputtext p-component p-element w-full">
                </div>
                <div class="flex-1">
                    <label for="netAmount" class="block mb-1 font-medium text-900">Net Amount (Rs.)</label>
                    <input type="text" pinputtext="" readonly disabled [value]="netAmount"
                        class="p-inputtext p-component p-element w-full">
                </div>
            </div>
            <div class="flex gap-2 justify-content-start py-3">
                <p-button [loading]="loading" label="Add New" (click)="addItems()" class="rounded">
                </p-button>
            </div>
            <p-table [value]="stampList" [rowHover]="true" styleClass="p-datatable-gridlines" class="w-full"
                responsiveLayout="scroll">
                <ng-template pTemplate="header">
                    <tr>
                        <th style="min-width: 12rem">Category</th>
                        <th style="min-width: 12rem">Denomination</th>
                        <th style="min-width: 12rem">Quantity</th>
                        <th style="min-width: 12rem">Gross Amount (Rs.)</th>
                        <th style="min-width: 12rem">Discount</th>
                        <th style="min-width: 12rem">Tax</th>
                        <th style="min-width: 12rem">Net Amount (Rs.)</th>
                        <th style="min-width: 12rem">Actions</th>
                    </tr>
                </ng-template>
                <ng-template pTemplate="body" let-stampList>
                    <tr class="p-selectable-row">
                        <td style="min-width: 12rem">{{ stampList.category }}</td>
                        <td style="min-width: 12rem">{{ stampList.denomination }}</td>
                        <td style="min-width: 12rem">{{ stampList.quantity }}</td>
                        <td style="min-width: 12rem">{{ stampList.grossAmount }}</td>
                        <td style="min-width: 12rem">{{ stampList.discountAmount }}</td>
                        <td style="min-width: 12rem">{{ stampList.taxAmount }}</td>
                        <td style="min-width: 12rem">{{ stampList.netAmount }}</td>
                        <td>
                            <p-button icon="pi pi-trash" severity="danger"
                                (onClick)="deleteProduct(stampList)"></p-button>
                        </td>
                    </tr>
                </ng-template>
                <ng-template pTemplate="emptymessage">
                    <tr>
                        <td colspan="9">No Data Available</td>
                    </tr>
                </ng-template>
                <ng-template pTemplate="loadingbody">
                    <tr>
                        <td colspan="12">Loading Employee Accounts. Please wait.</td>
                    </tr>
                </ng-template>
            </p-table>
            <div class="w-full flex justify-content-end align-items-center mt-3">
                <button pbutton="" pripple="" icon="pi pi-file" (click)="addStampRequisition()"
                    class="p-element p-ripple w-auto p-button p-component">
                    <span class="p-button-label">Submit Requisition</span>
                </button>
            </div>
        </div>
    </div>
</section>